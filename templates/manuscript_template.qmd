---
title: "{{< meta params.project_metadata.title >}}"
author: "{{< meta params.project_metadata.authors >}}"
date: "{{< meta params.project_metadata.date >}}"
format:
  pdf:
    documentclass: article
    toc: true
  docx:
    toc: true
params:
  project_metadata:
    title: "Default Title"
    authors: "Default Author"
    date: "Default Date"
    abstract: "Default abstract."
  analysis_paths:
    meta_results: "outputs/derived_data/meta_analysis_results.rds"
    integrated_data: "outputs/derived_data/integrated_harmonized_data.csv"
    forest_plot: "outputs/figures/meta_analysis_forest_plot.png"
    integration_summary: "outputs/tables/integration_report_summary.txt"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
library(knitr)
library(readr)
library(dplyr)
library(ggplot2)
```

## Abstract

{{< meta params.project_metadata.abstract >}}

## 1. Introduction

The relationship between Body Mass Index (BMI) and body fat percentage is a cornerstone of obesity research. While BMI is a widely used and convenient measure, its accuracy in predicting adiposity can vary across different populations and demographic groups. This report leverages an automated analysis platform to conduct a multi-study meta-analysis, synthesizing evidence from diverse sources to provide a more robust estimate of this relationship.

## 2. Methods

The analysis was performed using the Poly-Analyst framework, an automated engine for multi-source data integration and harmonization.

### Data Sources

Data were integrated from the following sources:

```{r data_sources}
# Load the integrated data to list the sources
integrated_data <- read_csv(params$analysis_paths$integrated_data, show_col_types = FALSE)
sources <- integrated_data %>%
  distinct(study_id) %>%
  pull(study_id)
cat(paste("-", sources), sep = "\n")
```

### Harmonization & Integration

Variables related to age, sex, BMI, and body fat percentage were harmonized across studies using a predefined ontology. A total of `r I(nrow(integrated_data))` records were included in the final integrated dataset.

### Meta-Analysis

A random-effects meta-analysis was conducted to estimate the pooled correlation between BMI and body fat percentage.

## 3. Results

The meta-analysis revealed a strong, positive correlation between BMI and body fat percentage.

```{r meta_summary}
# Load the meta-analysis results
meta_results <- readRDS(params$analysis_paths$meta_results)
summary_data <- summary(meta_results)

# Print a summary table
summary_df <- data.frame(
  Variable = c("Number of studies", "Pooled Correlation (Random Effects)", "95% CI", "I^2 (heterogeneity)"),
  Value = c(
    summary_data$k,
    sprintf("%.2f", summary_data$random$TE),
    sprintf("[%.2f; %.2f]", summary_data$random$lower, summary_data$random$upper),
    sprintf("%.1f%%", summary_data$I2 * 100)
  )
)
kable(summary_df, caption = "Summary of Meta-Analysis Results")
```

The forest plot below visualizes the correlation estimates from each individual study along with the pooled estimate.

```{r forest_plot, fig.cap="Forest plot of the correlation between BMI and body fat percentage.", out.width="100%"}
# The forest plot is pre-generated, so we just include the image
include_graphics(params$analysis_paths$forest_plot)
```

## 4. Conclusion

This automated meta-analysis confirms a strong and consistent positive relationship between BMI and body fat percentage across multiple large-scale health surveys. The Poly-Analyst framework provides a powerful tool for rapidly synthesizing evidence from disparate studies, enhancing the efficiency and reproducibility of epidemiological research.

---
*This document was generated automatically by the Dissemination Engine.*

